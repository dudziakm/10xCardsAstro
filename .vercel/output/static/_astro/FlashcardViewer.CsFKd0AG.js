import{j as e,B as x}from"./button.W_Ymsyb6.js";import{r as n}from"./index.ai7qpRr1.js";import{L as E}from"./LoadingSpinner.RGo8tKwc.js";function S({flashcard:t,flashcardId:l,onEdit:h,onDelete:u,onBack:f,showActions:p=!0}){const[r,m]=n.useState(!1),[d,g]=n.useState(t||null),[b,j]=n.useState(!t),[o,c]=n.useState(null);n.useEffect(()=>{!t&&!d&&l&&w(l)},[t,d,l]);const w=async a=>{try{j(!0),c(null);const i=await fetch(`/api/flashcards/${a}`);if(!i.ok){if(i.status===404){c("Fiszka nie zosta≈Ça znaleziona");return}throw new Error("Failed to load flashcard")}const k=await i.json();g(k)}catch{c("Nie uda≈Ço siƒô za≈Çadowaƒá fiszki")}finally{j(!1)}},s=t||d,v=()=>{s&&(h?h(s.id):window.location.href=`/flashcards/${s.id}/edit`)},z=async()=>{if(s&&confirm("Czy na pewno chcesz usunƒÖƒá tƒô fiszkƒô?"))try{const a=await fetch(`/api/flashcards/${s.id}`,{method:"DELETE"});if(!a.ok){const i=await a.json();throw new Error(i.message||"Failed to delete flashcard")}u?u(s.id):window.location.href="/flashcards"}catch(a){alert(a instanceof Error?a.message:"Failed to delete flashcard")}},N=()=>{f?f():window.location.href="/flashcards"},y=a=>new Date(a).toLocaleDateString("pl-PL",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});return b?e.jsx("div",{className:"flex justify-center items-center p-8",children:e.jsx(E,{text:"≈Åadowanie fiszki..."})}):o?e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[e.jsxs("div",{className:"text-red-800",children:[e.jsx("strong",{children:"B≈ÇƒÖd:"})," ",o]}),o==="Fiszka nie zosta≈Ça znaleziona"&&e.jsx("a",{href:"/flashcards",className:"mt-2 inline-block bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded",children:"Powr√≥t do listy"})]}):s?e.jsxs("div",{className:"space-y-6",children:[p&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(x,{onClick:N,variant:"outline",children:"‚Üê Powr√≥t do listy"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(x,{onClick:v,variant:"outline",children:"Edytuj"}),e.jsx(x,{onClick:z,variant:"outline",className:"text-red-600 border-red-600 hover:bg-red-50",children:"Usu≈Ñ"})]})]}),e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsx("div",{className:"relative bg-white border-2 border-gray-200 rounded-xl shadow-lg cursor-pointer transform transition-transform hover:scale-105",style:{minHeight:"300px"},onClick:()=>m(!r),onKeyDown:a=>{(a.key==="Enter"||a.key===" ")&&(a.preventDefault(),m(!r))},role:"button",tabIndex:0,"aria-label":r?"Kliknij aby zobaczyƒá prz√≥d fiszki":"Kliknij aby zobaczyƒá ty≈Ç fiszki",children:e.jsxs("div",{className:"absolute inset-0 p-6 flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("div",{className:`px-3 py-1 rounded-full text-sm font-medium ${r?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"}`,children:r?"Ty≈Ç":"Prz√≥d"}),e.jsx("div",{className:"text-sm text-gray-500",children:"Kliknij aby przewr√≥ciƒá"})]}),e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"text-lg leading-relaxed",children:r?s.back:s.front})})}),e.jsx("div",{className:"flex justify-center mt-4",children:e.jsx("div",{className:`px-3 py-1 rounded-full text-xs font-medium ${s.source==="ai"?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800"}`,children:s.source==="ai"?"ü§ñ AI":"‚úçÔ∏è Manualna"})})]})}),e.jsx("div",{className:"text-center mt-4",children:e.jsxs("p",{className:"text-gray-600",children:["Kliknij na fiszkƒô aby zobaczyƒá ",r?"prz√≥d":"ty≈Ç"]})})]}),e.jsxs("div",{className:"max-w-2xl mx-auto bg-gray-50 rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Informacje o fiszce"}),e.jsxs("div",{className:"space-y-1 text-sm text-gray-600",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Utworzona:"})," ",y(s.created_at)]}),s.updated_at!==s.created_at&&e.jsxs("div",{children:[e.jsx("strong",{children:"Ostatnia modyfikacja:"})," ",y(s.updated_at)]}),e.jsxs("div",{children:[e.jsx("strong",{children:"≈πr√≥d≈Ço:"})," ",s.source==="ai"?"Wygenerowana przez AI":"Utworzona rƒôcznie"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"ID:"})," ",s.id]})]})]})]}):e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[e.jsxs("div",{className:"text-yellow-800",children:[e.jsx("strong",{children:"Informacja:"})," Nie uda≈Ço siƒô za≈Çadowaƒá fiszki."]}),e.jsx("a",{href:"/flashcards",className:"mt-2 inline-block bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded",children:"Powr√≥t do listy"})]})}export{S as FlashcardViewer};
